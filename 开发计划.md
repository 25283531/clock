# 服药提醒助手开发计划

## 项目概述

这是一个专为老年人设计的服药提醒安卓应用，帮助用户按时按量服药。应用采用MVVM架构，使用Jetpack Compose构建UI，Hilt进行依赖注入，Room作为数据库。

## 已完成工作

### 1. 项目结构搭建
- 创建了完整的项目目录结构
- 配置了Gradle依赖和版本管理
- 设置了Hilt依赖注入
- 配置了Jetpack Compose

### 2. 数据层实现
- **Entity**：定义了Medicine、Reminder、MedicineRecord实体类
- **DAO**：实现了MedicineDao、ReminderDao、MedicineRecordDao
- **Database**：创建了MedicineDatabase数据库
- **Repository**：实现了MedicineRepository、ReminderRepository、MedicineRecordRepository
- **Mapper**：实现了实体和领域模型之间的转换

### 3. 领域层实现
- **Model**：定义了MedicineModel、ReminderModel、MedicineRecordModel、NextDoseModel
- **Use Case**：实现了各种业务逻辑用例，包括：
  - 药物管理（添加、编辑、删除、查询）
  - 提醒管理（添加、编辑、删除、查询）
  - 服药记录（添加、查询、更新）
  - 下次服药时间计算

### 4. UI层实现
- **主题配置**：定义了应用的颜色、排版和样式
- **导航**：实现了应用的导航结构
- **屏幕**：实现了DashboardScreen、MedicineListScreen、AddEditMedicineScreen
- **ViewModel**：实现了DashboardViewModel、MedicineViewModel、AddEditMedicineViewModel

### 5. 桌面小组件
- 创建了小组件布局和配置
- 实现了MedicineWidget小组件类
- 实现了MedicineTakenReceiver广播接收器

## 待完成工作

### 1. 功能完善
- 实现ReminderListScreen和AddEditReminderScreen
- 实现HistoryScreen
- 完善服药记录功能
- 实现撤销服药功能
- 实现闹钟提醒功能

### 2. 数据库优化
- 添加数据库版本迁移策略
- 优化查询性能

### 3. 测试
- 添加单元测试
- 添加UI测试

### 4. 性能优化
- 优化列表加载性能
- 优化小组件更新频率

### 5. 用户体验优化
- 添加引导页面
- 优化字体大小和颜色，提高可读性
- 添加语音提醒功能
- 实现紧急联系人功能

## 如何使用

1. 使用Android Studio打开项目
2. 等待Gradle同步完成
3. 连接Android设备或启动模拟器
4. 点击运行按钮构建并运行应用

## 技术栈

- **开发语言**：Kotlin
- **最低Android版本**：Android 8.0 (API 26)
- **目标Android版本**：Android 14 (API 34)
- **架构**：MVVM + Repository模式
- **数据库**：Room
- **UI框架**：Jetpack Compose
- **依赖注入**：Hilt
- **异步处理**：Kotlin Coroutines + Flow
- **桌面小组件**：App Widget + Glance

## 项目结构

```
MedicineReminder/
├── app/
│   ├── src/
│   │   ├── main/
│   │   │   ├── java/com/medicinereminder/
│   │   │   │   ├── data/           # 数据层
│   │   │   │   ├── di/             # 依赖注入配置
│   │   │   │   ├── domain/         # 领域层
│   │   │   │   ├── ui/             # UI层
│   │   │   │   ├── utils/          # 工具类
│   │   │   │   └── widget/         # 桌面小组件
│   │   │   └── res/                # 资源文件
│   │   └── test/                   # 测试代码
│   └── build.gradle.kts            # 模块配置
├── gradle/                         # Gradle配置
├── build.gradle.kts                # 项目配置
└── settings.gradle.kts             # 项目设置
```

## 核心功能

### 1. 个性化服药计划
- 支持每天多次服药
- 支持间隔天数服药
- 可设置每次服药的药物组合

### 2. 智能闹钟提醒
- 根据实际服药时间自动计算下次提醒
- 支持推送通知提醒
- 支持语音提醒

### 3. 桌面小组件
- 显示下次服药时间和药物信息
- 支持直接在桌面标记已服药
- 自动更新下次服药信息

### 4. 服药记录管理
- 记录每次服药时间
- 支持撤销误操作
- 提供服药统计和分析

### 5. 药物管理
- 支持添加药物照片
- 可编辑药物信息
- 支持删除药物

## 后续开发计划

1. **完善核心功能**：完成所有屏幕和功能的实现
2. **测试和优化**：添加测试用例，优化性能和用户体验
3. **发布准备**：准备应用图标、截图、描述等发布材料
4. **发布应用**：发布到Google Play Store
5. **持续更新**：根据用户反馈进行功能迭代和bug修复
