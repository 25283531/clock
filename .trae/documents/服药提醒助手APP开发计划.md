# 服药提醒助手APP开发计划（修订版）

## 1. 准备工作

### 1.1 应用图标设置
- 将根目录下的logo.png复制到res/mipmap-*文件夹中
- 生成不同尺寸的应用图标
- 在AndroidManifest.xml中配置应用图标

## 2. 功能完善

### 2.1 实现ReminderListScreen
- 创建提醒列表屏幕，显示所有服药提醒
- 支持添加、编辑、删除提醒
- 支持启用/禁用提醒

### 2.2 实现AddEditReminderScreen
- 创建添加/编辑提醒屏幕
- 支持选择提醒类型（每天多次/间隔天数）
- 支持设置服药次数、间隔时间
- 支持选择关联的药物

### 2.3 实现HistoryScreen
- 创建服药记录历史屏幕
- 支持按日期范围查询
- 支持查看详细的服药记录
- 支持按月份、天数删除以前的服药记录

### 2.4 完善服药记录功能
- 实现完整的服药记录逻辑
- 支持记录每次服药的药物列表
- 支持查看历史服药记录

### 2.5 实现撤销服药功能
- 在服药记录中添加撤销按钮
- 支持长按记录设置为未服药
- 重新计算下次服药时间

### 2.6 实现闹钟提醒功能
- 集成AlarmManager实现闹钟提醒
- 创建通知渠道
- 实现通知点击处理

### 2.7 实现数据导出和导入功能
- 支持将数据导出为CSV或JSON格式
- 支持从CSV或JSON文件导入数据
- 支持数据备份和恢复

## 3. 桌面小组件优化

### 3.1 调整小组件功能
- 移除小组件的服药提醒功能
- 支持4*4和4*5两种尺寸
- 固定显示4行待服药提醒
- 完成后从小组件上消失，添加下一条

### 3.2 优化小组件UI
- 设计清晰的待服药列表
- 支持直接在小组件标记完成
- 自动更新待服药列表

## 4. 用户体验优化

### 4.1 添加引导页面
- 创建应用首次启动引导
- 分步介绍应用功能
- 支持跳过引导

### 4.2 优化字体大小和颜色
- 增大默认字体大小
- 提高文字对比度
- 优化老年人使用体验

### 4.3 添加语音提醒功能
- 集成Text-to-Speech
- 支持服药时语音提醒
- 支持自定义提醒语音

## 5. 技术实现细节

### 5.1 导航配置
- 在AppNavigation中添加新的屏幕路由
- 实现屏幕间的参数传递

### 5.2 ViewModel实现
- 创建ReminderViewModel和HistoryViewModel
- 实现相应的业务逻辑

### 5.3 数据库优化
- 添加必要的索引
- 优化查询性能

### 5.4 权限处理
- 处理闹钟权限
- 处理通知权限
- 处理语音权限
- 处理存储权限（用于数据导出导入）

## 6. 开发顺序

1. 准备应用图标
2. 实现ReminderListScreen和AddEditReminderScreen
3. 实现HistoryScreen
4. 完善服药记录和撤销服药功能
5. 实现闹钟提醒功能
6. 实现数据导出和导入功能
7. 优化桌面小组件
8. 添加引导页面
9. 优化字体大小和颜色
10. 添加语音提醒功能

## 7. 预期成果

- 完整的服药提醒功能
- 良好的用户体验
- 优化的桌面小组件（4*4和4*5尺寸，显示4行待服药提醒）
- 支持语音提醒
- 支持数据导出和导入
- 支持按月份、天数删除服药记录
- 适合老年人使用的界面设计

## 8. 测试计划

- 单元测试：测试核心业务逻辑
- UI测试：测试屏幕交互
- 集成测试：测试完整流程
- 真机测试：在实际设备上测试功能
- 小组件测试：测试不同尺寸的小组件

## 9. 发布准备

- 准备应用截图和描述
- 进行性能优化
- 进行安全检查
- 准备发布到应用商店